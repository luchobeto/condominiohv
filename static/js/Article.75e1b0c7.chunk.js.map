{"version":3,"sources":["components/Article/ArticleActions.js","components/Article/ArticleMeta.js","components/Article/CommentInput.js","components/Article/DeleteButton.js","components/Article/Comment.js","components/Article/CommentList.js","components/Article/CommentContainer.js","components/Article/index.js"],"names":["ArticleActions","props","article","canModify","to","slug","className","onClick","onClickDelete","agent","Articles","del","connect","dispatch","payload","type","DELETE_ARTICLE","React","memo","ArticleMeta","author","username","src","image","alt","Date","createdAt","toDateString","CommentInput","state","body","setBody","ev","setState","target","value","createComment","preventDefault","Comments","create","onSubmit","this","placeholder","onChange","rows","currentUser","PureComponent","ADD_COMMENT","DeleteButton","show","delete","commentId","DELETE_COMMENT","Comment","comment","id","CommentList","comments","map","CommentContainer","errors","Article","onLoad","Promise","all","get","match","params","forArticle","onUnload","markup","__html","marked","sanitize","title","dangerouslySetInnerHTML","tagList","tag","commentErrors","common","ARTICLE_PAGE_LOADED","ARTICLE_PAGE_UNLOADED"],"mappings":"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","file":"static/js/Article.75e1b0c7.chunk.js","sourcesContent":["import { Link } from 'react-router-dom';\nimport React from 'react';\nimport agent from '../../agent';\nimport { connect } from 'react-redux';\nimport { DELETE_ARTICLE } from '../../constants/actionTypes';\n\nconst mapDispatchToProps = dispatch => ({\n  onClickDelete: payload =>\n    dispatch({ type: DELETE_ARTICLE, payload })\n});\n\nconst ArticleActions = props => {\n  const article = props.article;\n  const del = () => {\n    props.onClickDelete(agent.Articles.del(article.slug))\n  };\n  if (props.canModify) {\n    return (\n      <span>\n\n        <Link\n          to={`/editor/${article.slug}`}\n          className=\"btn btn-outline-secondary btn-sm\">\n          <i className=\"ion-edit\"></i> Edita Artículo\n        </Link>\n\n        <button className=\"btn btn-outline-danger btn-sm\" onClick={del}>\n          <i className=\"ion-trash-a\"></i> Borra Artículo\n        </button>\n\n      </span>\n    );\n  }\n\n  return (\n    <span>\n    </span>\n  );\n};\n\nexport default connect(() => ({}), mapDispatchToProps)(React.memo(ArticleActions));\n","import ArticleActions from './ArticleActions';\nimport { Link } from 'react-router-dom';\nimport React, {memo} from 'react';\n\nconst ArticleMeta = props => {\n  const article = props.article;\n  return (\n    <div className=\"article-meta\">\n      <Link to={`/@${article.author.username}`}>\n        <img src={article.author.image || 'https://static.productionready.io/images/smiley-cyrus.jpg'} alt={article.author.username} />\n      </Link>\n\n      <div className=\"info\">\n        <Link to={`/@${article.author.username}`} className=\"author\">\n          {article.author.username}\n        </Link>\n        <span className=\"date\">\n          {new Date(article.createdAt).toDateString()}\n        </span>\n      </div>\n\n      <ArticleActions canModify={props.canModify} article={article} />\n    </div>\n  );\n};\n\nexport default memo(ArticleMeta);\n","import React from 'react';\nimport agent from '../../agent';\nimport { connect } from 'react-redux';\nimport { ADD_COMMENT } from '../../constants/actionTypes';\n\nconst mapDispatchToProps = dispatch => ({\n  onSubmit: payload =>\n    dispatch({ type: ADD_COMMENT, payload })\n});\n\nclass CommentInput extends React.PureComponent {\n  constructor() {\n    super();\n    this.state = {\n      body: ''\n    };\n\n    this.setBody = ev => {\n      this.setState({ body: ev.target.value });\n    };\n\n    this.createComment = ev => {\n      ev.preventDefault();\n      const payload = agent.Comments.create(this.props.slug,\n        { body: this.state.body });\n      this.setState({ body: '' });\n      this.props.onSubmit(payload);\n    };\n  }\n\n  render() {\n    return (\n      <form className=\"card comment-form\" onSubmit={this.createComment}>\n        <div className=\"card-block\">\n          <textarea className=\"form-control\"\n            placeholder=\"Escribe un comentario...\"\n            value={this.state.body}\n            onChange={this.setBody}\n            rows=\"3\">\n          </textarea>\n        </div>\n        <div className=\"card-footer\">\n          <img\n            src={this.props.currentUser.image || 'https://static.productionready.io/images/smiley-cyrus.jpg'}\n            className=\"comment-author-img\"\n            alt={this.props.currentUser.username} />\n          <button\n            className=\"btn btn-sm btn-primary\"\n            type=\"submit\">\n            Grabar\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default connect(() => ({}), mapDispatchToProps)(React.memo(CommentInput));\n","import React from 'react';\nimport agent from '../../agent';\nimport { connect } from 'react-redux';\nimport { DELETE_COMMENT } from '../../constants/actionTypes';\n\nconst mapDispatchToProps = dispatch => ({\n  onClick: (payload, commentId) =>\n    dispatch({ type: DELETE_COMMENT, payload, commentId })\n});\n\nconst DeleteButton = props => {\n  const del = () => {\n    const payload = agent.Comments.delete(props.slug, props.commentId);\n    props.onClick(payload, props.commentId);\n  };\n\n  if (props.show) {\n    return (\n      <span className=\"mod-options\">\n        <i className=\"ion-trash-a\" onClick={del}></i>\n      </span>\n    );\n  }\n  return null;\n};\n\nexport default connect(() => ({}), mapDispatchToProps)(React.memo(DeleteButton));\n","import DeleteButton from './DeleteButton';\nimport { Link } from 'react-router-dom';\nimport React from 'react';\n\nconst Comment = props => {\n  const comment = props.comment;\n  const show = props.currentUser &&\n    props.currentUser.username === comment.author.username;\n  return (\n    <div className=\"card\">\n      <div className=\"card-block\">\n        <p className=\"card-text\">{comment.body}</p>\n      </div>\n      <div className=\"card-footer\">\n        <Link\n          to={`/@${comment.author.username}`}\n          className=\"comment-author\">\n          <img src={comment.author.image || 'https://static.productionready.io/images/smiley-cyrus.jpg'} className=\"comment-author-img\" alt={comment.author.username} />\n        </Link>\n        &nbsp;\n        <Link\n          to={`/@${comment.author.username}`}\n          className=\"comment-author\">\n          {comment.author.username}\n        </Link>\n        <span className=\"date-posted\">\n          {new Date(comment.createdAt).toDateString()}\n        </span>\n        <DeleteButton show={show} slug={props.slug} commentId={comment.id} />\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(Comment);\n","import Comment from './Comment';\nimport React from 'react';\n\nconst CommentList = props => {\n  return (\n    <div>\n      {\n        props.comments.map(comment => {\n          return (\n            <Comment\n              comment={comment}\n              currentUser={props.currentUser}\n              slug={props.slug}\n              key={comment.id} />\n          );\n        })\n      }\n    </div>\n  );\n};\n\nexport default React.memo(CommentList);\n","import CommentInput from './CommentInput';\nimport CommentList from './CommentList';\nimport { Link } from 'react-router-dom';\nimport React from 'react';\n\nconst CommentContainer = props => {\n  if (props.currentUser) {\n    return (\n      <div className=\"col-xs-12 col-md-8 offset-md-2\">\n        <div>\n          <list-errors errors={props.errors}></list-errors>\n          <CommentInput slug={props.slug} currentUser={props.currentUser} />\n        </div>\n\n        <CommentList\n          comments={props.comments}\n          slug={props.slug}\n          currentUser={props.currentUser} />\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"col-xs-12 col-md-8 offset-md-2\">\n        <p>\n          <Link to=\"/login\">Registrarse</Link>\n          &nbsp;or&nbsp;\n          <Link to=\"/register\">sign up</Link>\n          &nbsp;to add comments on this article.\n        </p>\n\n        <CommentList\n          comments={props.comments}\n          slug={props.slug}\n          currentUser={props.currentUser} />\n      </div>\n    );\n  }\n};\n\nexport default React.memo(CommentContainer);\n","import ArticleMeta from './ArticleMeta';\nimport CommentContainer from './CommentContainer';\nimport React from 'react';\nimport agent from '../../agent';\nimport { connect } from 'react-redux';\nimport marked from 'marked';\nimport { ARTICLE_PAGE_LOADED, ARTICLE_PAGE_UNLOADED } from '../../constants/actionTypes';\n\nconst mapStateToProps = state => ({\n  ...state.article,\n  currentUser: state.common.currentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onLoad: payload =>\n    dispatch({ type: ARTICLE_PAGE_LOADED, payload }),\n  onUnload: () =>\n    dispatch({ type: ARTICLE_PAGE_UNLOADED })\n});\n\nclass Article extends React.PureComponent {\n  componentDidMount() {\n    this.props.onLoad(Promise.all([\n      agent.Articles.get(this.props.match.params.id),\n      agent.Comments.forArticle(this.props.match.params.id)\n    ]));\n  }\n\n  componentWillUnmount() {\n    this.props.onUnload();\n  }\n\n  render() {\n    if (!this.props.article) {\n      return null;\n    }\n\n    const markup = { __html: marked(this.props.article.body, { sanitize: true }) };\n    const canModify = this.props.currentUser &&\n      this.props.currentUser.username === this.props.article.author.username;\n    return (\n      <div className=\"article-page\">\n\n        <div className=\"banner\">\n          <div className=\"container\">\n\n            <h1>{this.props.article.title}</h1>\n            <ArticleMeta\n              article={this.props.article}\n              canModify={canModify} />\n\n          </div>\n        </div>\n\n        <div className=\"container page\">\n\n          <div className=\"row article-content\">\n            <div className=\"col-xs-12\">\n\n              <div dangerouslySetInnerHTML={markup}></div>\n\n              <ul className=\"tag-list\">\n                {\n                  this.props.article.tagList.map(tag => {\n                    return (\n                      <li\n                        className=\"tag-default tag-pill tag-outline\"\n                        key={tag}>\n                        {tag}\n                      </li>\n                    );\n                  })\n                }\n              </ul>\n\n            </div>\n          </div>\n\n          <hr />\n\n          <div className=\"article-actions\">\n          </div>\n\n          <div className=\"row\">\n            <CommentContainer\n              comments={this.props.comments || []}\n              errors={this.props.commentErrors}\n              slug={this.props.match.params.id}\n              currentUser={this.props.currentUser} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Article);\n"],"sourceRoot":""}